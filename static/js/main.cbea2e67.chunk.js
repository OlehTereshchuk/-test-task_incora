(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{29:function(e,t,n){e.exports=n(41)},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(8),c=n(11),o=n(5),u=n(17),l=n.n(u),i=n(14),m=n(26),p=n(1),d=n.n(p),f=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(fetch("https://jsonplaceholder.typicode.com/users"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}))},b=function(e){return{type:"SET_USERS",users:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return t.users;default:return e}},E=n(18),y=n(13),v=function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(fetch(e));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},_=function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(fetch(e));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},j=function(e,t,n){var a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.a.awrap(fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify({userId:e,title:t,body:n}),headers:{"Content-type":"application/json; charset=UTF-8"}}));case 2:return a=r.sent,r.abrupt("return",a.json());case 4:case"end":return r.stop()}}))},O=function(e,t){var n,a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n="https://jsonplaceholder.typicode.com/posts/".concat(e),r.next=3,d.a.awrap(fetch(n,{method:"PUT",body:JSON.stringify({body:t}),headers:{"Content-type":"application/json; charset=UTF-8"}}));case 3:return a=r.sent,r.abrupt("return",a.json());case 5:case"end":return r.stop()}}))},S=function(e){var t,n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="https://jsonplaceholder.typicode.com/posts/".concat(e),a.next=3,d.a.awrap(fetch(t,{method:"DELETE"}));case 3:return n=a.sent,a.abrupt("return",n.json());case 5:case"end":return a.stop()}}))},w=function(e){return{type:"SET_POSTS",posts:e}},x=function(e){return{type:"SET_CURRENT_POST",post:e}},N=function(e,t){return{type:"EDIT_POST",id:e,body:t}},T={posts:[],currentPost:{}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return Object(y.a)({},e,{posts:t.posts});case"SET_CURRENT_POST":return Object(y.a)({},e,{currentPost:t.post});case"ADD_POST":return Object(y.a)({},e,{posts:[t.post].concat(Object(E.a)(e.posts))});case"EDIT_POST":return Object(y.a)({},e,{posts:Object(E.a)(e.posts.map((function(e){return e.id===t.id?Object(y.a)({},e,{body:t.body}):e})))});case"DELETE_POST":return Object(y.a)({},e,{posts:Object(E.a)(e.posts.filter((function(e){return e.id!==t.id})))});default:return e}},g=function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(fetch(e));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}))},C=function(e){return{type:"SET_COMMENTS",comments:e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COMMENTS":return t.comments;default:return e}},I=Object(i.c)({users:h,postsInfo:P,comments:F}),k=function(e){return e.users},D=function(e){return e.postsInfo.posts},U=function(e){return e.postsInfo.currentPost},R=function(e){return e.comments},A=Object(i.d)(I,Object(i.a)(m.a)),L=(n(39),function(e){var t=e.userData,n=e.columns;return r.a.createElement("tr",null,n.map((function(e){return"posts"===e?r.a.createElement("td",{key:e,className:"table__body-item"},r.a.createElement(c.b,{to:"/posts?userId=".concat(t.id),className:"table__body-link"},"Details")):r.a.createElement("td",{className:"table__body-item",key:e},t[e])})))}),J={loadUsersFromServer:function(){return function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(f());case 2:t=n.sent,e(b(t));case 4:case"end":return n.stop()}}))}}},M=Object(s.b)((function(e){return{users:k(e)}}),J)((function(e){var t=e.users,n=e.loadUsersFromServer,s=["id","name","username","email","posts"];return Object(a.useEffect)((function(){n()}),[n]),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,s.map((function(e){return r.a.createElement("th",{key:e,className:"table__head-item"},e)})))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(L,{key:e.id,columns:s,userData:e})}))))})),B=n(12),V=n(28),q=n.n(V),X=Object(s.b)(null,{addPost:function(e,t,n){return function(a){var r;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,d.a.awrap(j(e,t,n));case 2:r=s.sent,a({type:"ADD_POST",post:r});case 4:case"end":return s.stop()}}))}}})((function(e){var t=e.userId,n=e.setIsFormVisible,s=e.addPost,c=Object(a.useState)(""),o=Object(B.a)(c,2),u=o[0],l=o[1],i=Object(a.useState)(""),m=Object(B.a)(i,2),p=m[0],d=m[1];return r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),""!==u.trim()&&""!==p.trim()&&(s(t,u,p),n(!1))}},r.a.createElement("label",{htmlFor:"title",className:"form__label"},"Title:",r.a.createElement("input",{type:"text",id:"title",className:"form__title",onChange:function(e){var t=e.target;l(t.value)},value:u,required:!0})),r.a.createElement("label",{htmlFor:"body",className:"form__label"},"Body:",r.a.createElement("textarea",{type:"text",id:"body",className:"form__textarea",onChange:function(e){var t=e.target;d(t.value)},value:p,required:!0})),r.a.createElement("input",{type:"submit",value:"Add  post",className:"form__submit"}))})),z={loadPostsFromServer:function(e){return function(t){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(v(e));case 2:n=a.sent,t(w(n));case 4:case"end":return a.stop()}}))}},editPost:function(e,t){return function(n){var a,r,s;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,d.a.awrap(O(e,t));case 2:a=c.sent,r=a.id,s=a.body,n(N(r,s));case 6:case"end":return c.stop()}}))}},deletePost:function(e){return function(t){return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(S(e));case 2:n.sent&&t({type:"DELETE_POST",id:e});case 4:case"end":return n.stop()}}))}}},G=Object(s.b)((function(e){return{posts:D(e)}}),z)((function(e){var t=e.posts,n=e.loadPostsFromServer,s=e.editPost,u=e.deletePost,l=Object(a.useState)(!1),i=Object(B.a)(l,2),m=i[0],p=i[1],d=Object(a.useState)(null),f=Object(B.a)(d,2),b=f[0],h=f[1],E=Object(a.useState)(""),y=Object(B.a)(E,2),v=y[0],_=y[1],j=Object(o.e)(),O=new URLSearchParams(j.search),S="https://jsonplaceholder.typicode.com/posts".concat(j.search),w=O.get("userId"),x=m?"Close":"Add new post",N=function(e){var t=e.target;_(t.value)};return Object(a.useEffect)((function(){n(S)}),[n,S]),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:q()("popup-button",{"popup-button--close":m}),type:"button",onClick:function(){p(!m)}},x),m&&r.a.createElement(X,{userId:w,setIsFormVisible:p}),t.map((function(e){var t=e.id,n=e.title,a=e.body;return r.a.createElement("section",{key:t,className:"post shadow"},r.a.createElement("h2",{className:"post__title"},n),r.a.createElement("p",null,a),b===t&&r.a.createElement("form",{className:"post__edit-form",onSubmit:function(e){return function(e,t){t.preventDefault(),""!==v&&(s(e,v),h(null))}(t,e)}},r.a.createElement("button",{onClick:function(){return h(null)},type:"button",className:"post__edit-close"},"X"),r.a.createElement("label",{htmlFor:"textarea"},"Body:",r.a.createElement("textarea",{id:"textarea",onChange:N,className:"post__edit-textarea",defaultValue:a})),r.a.createElement("input",{type:"submit",className:"post__edit-submit",value:"Edit"})),r.a.createElement(c.b,{to:"/comments?postId=".concat(t),className:"post__link"},"All information"),r.a.createElement("button",{type:"button",className:"post__icon post__icon--edit",onClick:function(){return function(e){_(""),h(b!==e?e:null)}(t)}}),r.a.createElement("button",{type:"button",className:"post__icon post__icon--delete",onClick:function(){return u(t)}}))})))})),H=function(e){var t=e.comments;return r.a.createElement("article",{className:"comments"},r.a.createElement("dl",null,t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("dt",{className:"comment__author"},e.name,r.a.createElement("br",null),e.email),r.a.createElement("dd",{className:"comment__body"},e.body))}))))},K={loadCommentsFromServer:function(e){return function(t){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(g(e));case 2:n=a.sent,t(C(n));case 4:case"end":return a.stop()}}))}},loadPostFromServer:function(e){return function(t){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(_(e));case 2:n=a.sent,t(x(n));case 4:case"end":return a.stop()}}))}}},Q=Object(s.b)((function(e){return{comments:R(e),post:U(e)}}),K)((function(e){var t=e.comments,n=e.loadCommentsFromServer,s=e.post,c=e.loadPostFromServer,u=Object(o.e)(),l=new URLSearchParams(u.search),i="https://jsonplaceholder.typicode.com/comments".concat(u.search),m=+l.get("postId"),p="https://jsonplaceholder.typicode.com/posts/".concat(m);return Object(a.useEffect)((function(){c(p),n(i)}),[n,i,c,p]),r.a.createElement("section",{className:"post shadow"},r.a.createElement("h2",{className:"post__title"},s.title),r.a.createElement("p",null,s.body),t.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"post__title"},"Comments"),r.a.createElement(H,{comments:t})))}));l.a.render(r.a.createElement(s.a,{store:A},r.a.createElement(c.a,null,r.a.createElement(c.b,{to:"/users",className:"link",activeClassName:"link--active"},"Users"),r.a.createElement(o.a,{path:"/users",component:M}),r.a.createElement(o.a,{path:"/posts/:userId?",component:G}),r.a.createElement(o.a,{path:"/comments/:postId?",component:Q}))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.cbea2e67.chunk.js.map